<!-- Common imports -->
<link rel="import" href="../../polymer/polymer.html" />
<link rel="import" href="../../px-polymer-font-awesome/px-polymer-font-awesome.html" />

<!-- Common demo imports -->
<link rel="import" href="../../px-demo/px-demo-header.html" />
<link rel="import" href="../../px-demo/px-demo-api-viewer.html" />
<link rel="import" href="../../px-demo/px-demo-footer.html" />
<link rel="import" href="../../px-demo/px-demo-configs.html" />
<link rel="import" href="../../px-demo/px-demo-props.html" />
<link rel="import" href="../../px-demo/px-demo-interactive.html" />
<link rel="import" href="../../px-demo/px-demo-code-editor.html" />
<link rel="import" href="../../px-demo/px-demo-component-snippet.html" />

<!-- Imports for this componnent -->
<link rel="import" href="../../px-demo/css/px-demo-styles.html" />
<link rel="import" href="../px-simple-line-chart.html" />

<!-- Demo DOM module -->
<dom-module id="local-element-demo">
  <template>
    <style include="px-demo-styles" is="custom-style"></style>

    <!-- Header -->
    <px-demo-header
        module-name="px-simple-line-chart"
        description="The Simple Line Chart provides a quick way to visualize linear data. Configuration options include
        setting the minimum and maximum values for the Y-axis, whether or not to include a orange horizontal line
        at a certain threshold value, setting the number of vertical and horizontal grid marks; and customizing
        the labels of the min, max, and threshold.">
    </px-demo-header>

    <!-- Interactive -->
    <px-demo-interactive>
      <!-- Configs -->
      <px-demo-configs configs="[[configs]]" props="{{props}}" chosen-config="{{chosenConfig}}"></px-demo-configs>

      <!-- Props -->
      <px-demo-props props="{{props}}" config="[[chosenConfig]]"></px-demo-props>

      <!-- Code Editor -->
      <px-demo-code-editor props="{{props}}"></px-demo-code-editor>

      <!-- Component ---------------------------------------------------------->
      <px-demo-component>

        <div>
          <px-simple-line-chart
              width="{{props.width.value}}"
              height="{{props.height.value}}"
              min="{{props.min.value}}"
              max="{{props.max.value}}"
              columns="{{props.columns.value}}"
              rows="{{props.rows.value}}"
              line-data="{{props.lineData.value}}"
              threshold="{{props.threshold.value}}"
              min-label="{{props.minLabel.value}}"
              max-label="{{props.maxLabel.value}}"
              threshold-label="{{props.thresholdLabel.value}}"
              max-data-points="{{props.maxDataPoints.value}}" >
          </px-simple-line-chart>
        </div>
      </px-demo-component>
      <!-- END Component ------------------------------------------------------>

      <px-demo-component-snippet
          element-properties="{{props}}"
          element-name="px-simple-line-chart"
          scripts-includes=[[scriptsIncludes]]>
      </px-demo-component-snippet>
    </px-demo-interactive>

    <!-- API Viewer -->
    <px-demo-api-viewer source="px-simple-line-chart"></px-demo-api-viewer>

    <!-- Footer -->
    <px-demo-footer></px-demo-footer>

  </template>

</dom-module>
<script>
  Polymer({
    is: 'local-element-demo',

    properties: {

      props: {
        type: Object,
        value: function(){ return this.demoProps; }
      },

      scriptsIncludes: {
        type: Array,
        value: function(){ return ['https://d3js.org/d3.v3.min.js'];}
      },

      configs: {
        type: Array,
        value: function(){
          var data = [
            [1397102460000, 1.99],
            [1397139660000, 1.92],
            [1397177400000, 1.97],
            [1397228040000, 1.12],
            [1397248260000, 1.09],
            [1397291280000, 1],
            [1397318100000, 1.99],
            [1397342100000, 1.75],
            [1397390820000, 1.11],
            [1397408100000, 1.93],
            [1397458800000, 1.84],
            [1397522940000, 1.99]
          ];
          return [
            { configName: "Simple",
              configShowProps: ['lineData','width','height','columns','rows'],
              lineData: data,
              width: "auto",
              height: "200",
              min: "",
              max: "",
              columns: "8",
              rows: "5",
              threshold: "",
              minLabel: "",
              maxLabel: "",
              thresholdLabel: ""},

            { configName: "Full config",
              lineData: data,
              width: "350",
              height: "250",
              min: "0.5",
              max: "3.0",
              columns: "5",
              rows: "3",
              threshold: "1.8",
              minLabel: "min",
              maxLabel: "max",
              thresholdLabel: "avg" }
          ]
        }
      }
    },

    // TODO: future enhancement? add demo of live data updating
    //   var chart = Polymer.dom(document).querySelector('#chart3');
    //   var lineData = [ [(new Date()).getTime(), Math.random()] ];
    //
    //   chart.lineData = lineData;
    //   setInterval(function() {
    //       var point = [(new Date()).getTime(), (Math.random() * 1.4) - 0.8]
    //       chart.addPoint(point);
    //   }, 150);
    // },

    demoProps: {

      lineData: {
        type: Array,
        defaultValue: '[ [1,2], [2,3], [3,4] ]',
        inputType: 'code:JSON'
      },

      width: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      height: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      min: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      max: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      columns: {
        type: String,
        defaultValue: '7',
        inputType: 'text'
      },

      rows: {
        type: String,
        defaultValue: '7',
        inputType: 'text'
      },

      threshold: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      minLabel: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      maxLabel: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      },

      thresholdLabel: {
        type: String,
        defaultValue: '',
        inputType: 'text'
      }
    }

  });
</script>
